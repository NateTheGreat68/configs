# Required:
# Argument 1: The desired toolbox name
# Argument 2: The project name

TOOLBOX_NAME="$1"
PROJECT_NAME="$2"

if [[ -f /run/.toolboxenv ]]; then
	if [[ "$(sed -nE 's/name="(.*)"$/\1/p' /run/.containerenv)" != "$TOOLBOX_NAME" ]]; then
		# We're in the wrong toolbox.
		toolbox run -c "$TOOLBOX_NAME" "$PROJECT_HOME/.projectscripts/.project.sh" "$PROJECT_NAME"
		return 4
	else
		# We're in the right toolbox.
		return 0
	fi
else
	# We aren't in a toolbox.
	toolbox run -c "$TOOLBOX_NAME" "$PROJECT_HOME/.projectscripts/.project.sh" "$PROJECT_NAME"
	return 4
fi
return 1
